<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="utf-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <title>CSCI 2320 &mdash; Principles of Programming Languages</title>
   <link href="css/bootstrap.min.css" rel="stylesheet">
   <link href="css/starter-template.css" rel="stylesheet">
</head> 

<body>

    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" class="active"
          href="index.html">Principles of Programming Languages</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <!-- <li class="active"><a href="#">Home</a></li> --> 
            <li><a href="lectures.html">Lectures</a></li>
            <li class="dropdown active">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="true">Assignments <span class="caret"></span></a>
                <ul class="dropdown-menu" role="menu">
                  <li><a href="pa1.html">PA1 &mdash; Rosetta</a></li> 
                  <li><a href="pa2.html">PA2 &mdash; Lexer</a></li> 
                  <li><a href="pa3.html">PA3 &mdash; Parser</a></li> 
                  <li><a href="pa4.html">PA4 &mdash; Semantic Analyzer</a></li> 
                  <li><a href="pa5.html">PA5 &mdash; Interpreter</a></li> 
                  <li class="divider"></li>
                  <li><a href="https://autograder.io/web/course/262">Project Submission</a></li> 
                </ul>
            </li> 
            <li><a href="exams.html">Exams</a></li>
            <li><a href="cool.html">Cool</a></li>
            <li><a href="https://piazza.com/bowdoin/spring2024/csci2320">Forum</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

<div class="container">
<div class="starter-template">

<h1>PA2 &mdash; The Lexer</h1> 

<p>
Programming assignments 2 through 5 direct you to design and build 
an interpreter for Cool. Each assignment covers one component of the
interpreter: lexical analysis, parsing, semantic analysis, and
operational semantics. Each assignment ultimately results in a working
interpreter phase which can interface with the other phases. 
</p><p>
You may complete this assignment using OCaml, Haskell, JavaScript, Python
or Ruby.
</p><p>
You may work in a team of two people for this assignment. You may work in a
team for any or all subsequent programming assignments. You do not need to
keep the same teammate. Course staff are not responsible for finding
you a willing teammate. 
</p>

<h1>Goal</h1> 

<p>
For this assignment you will write a <i>lexical analyzer</i>, also called a
<i>scanner</i>, using a <i>lexical analyzer generator</i>. You will
describe the set of tokens for Cool in an appropriate input format and the
analyzer generator will generate actual code. 
You will then write additional code to serialize the tokens for
use by later interpreter stages. 
</p> 

<h1>Specification</h1> 

<p> 
You must create three artifacts: 
</p> 
<ol>

<li> A program that takes a single command-line argument (e.g.,
<tt>file.cl</tt>). That argument will be an ASCII text Cool source file.
Your program must either indicate that there is an error in the input
(e.g., a malformed string) or emit <tt>file.cl-lex</tt>, a serialized list
of Cool tokens. Your program's main lexer component must be constructed by
a lexical analyzer generator. The "glue code" for processing command-line
arguments and serializing tokens should be written by hand.  If your
program is called <tt>lexer</tt>, invoking <tt>lexer file.cl</tt> should
yield the same output as <tt>cool --lex file.cl</tt>. Your program will
consist of a number of OCaml files, a number of Python files, a number of
JavaScript files, or a number
of Ruby files. 

<li> A plain ASCII text file called <tt>readme.txt</tt> describing your
design decisions and choice of test cases. See the grading rubric. A few
paragraphs should suffice. 

<li> Testcases <tt>good.cl</tt> and <tt>bad.cl</tt>. The first should
lex correctly and yield a sequence of tokens. The second should contain an
error. 

</ol>

<div class="panel panel-warning">
<div class="panel-body">
You <i>must</i> use ply or ruby-lex or ocamllex or jison
(or a similar tool or library). Do not write your entire lexer by hand.
Parts of it must be tool-generated from regular expressions you provide.
</div>
</div>

<h1>Line Numbers</h1> 

<p>
The first line in a file is line 1. Each successive <tt>'\n'</tt> newline
character increments the line count. Your lexer is responsible for keeping
track of the current line number.  
</p> 

<h1>Error Reporting</h1> 

<p>
To report an error, write the string 
</p> 
<div class="panel panel-danger">
<div class="panel-body">
<tt>ERROR: <i>line_number</i>: Lexer: <i>message</i></tt> 
</div>
</div>
<p>
to standard output and terminate the program. You may
write whatever you want in the message, but it should be fairly indicative. 
Example erroneous input:
</p> 
<div class="panel panel-primary"><div class="panel-body">
A file containing a backslash \ in the middle of nowhere 
</div> </div> 
<p> 
Example error report output: 
</p> 
<div class="panel panel-danger"><div class="panel-body">
ERROR: 1: Lexer: invalid character: \ 
</div> </div> 

<h1>The .cl-lex File Format</h1> 

<p> 
If there are no errors in <tt>file.cl</tt> your program should create
<tt>file.cl-lex</tt> and serialize the tokens to it. Each token is
represented by a pair (or triplet) of lines. The first line holds the line
number. The second line gives the name of the token. The optional third
line holds additional information (i.e., the <i>lexeme</i>) for
identifiers, integers, strings and types. For example, for an integer
token the third line should contain the decimal integer value.
</p>
<p> 
Example input: 
<div class="panel panel-primary"><div class="panel-body">
Backslash not </br> 
&nbsp;&nbsp;&nbsp;allowed 
</div></div> 
<p> 
Corresponding <tt>.cl-lex</tt> output: 
</p> 
<div class="panel panel-primary"><div class="panel-body">
1 </br> 
type </br> 
Backslash </br> 
1 </br> 
not </br> 
2 </br> 
identifier </br> 
allowed </br> 
</div></div> 
<p> 
The official list of token names is:
</p> 
<ul>
<li> <tt>at case class colon comma divide dot else equals esac false fi
identifier if in inherits integer isvoid larrow lbrace le let loop lparen
lt minus new not of plus pool rarrow rbrace rparen semi string then tilde
times true type while</tt> 
</ul>
<p>
In general the intended token is evident. For the more exotic names: 
</p> 
<ul>
<li> <tt>at
= @, larrow = &lt;-, lbrace = {, le = &lt;=, lparen = (, lt = &lt;, rarrow
= =&gt;, rbrace = }, semi = ;, tilde = ~</tt>. 
</ul> 
<p>
The <tt>.cl-lex</tt> file format is exactly the same as the one generated
by the reference compiler when you specify <tt>--lex</tt>. In addition,
the reference compiler (and your upcoming PA3 parser!) will read
<tt>.cl-lex</tt> files instead of <tt>.cl</tt> files. 
</p> 
<p>
You can think of this format as a very simplified version of JSON or XML or
the like. (However, since we have not covered parsing yet, we will not use
a format that requires "balanced parentheses".) 
</p> 

<h1>Lexical Analyzer Generators</h1> 

<P>
You must use a lexical analyzer generator or similar library for this
assignment.
</p> 
<ul>

<li> 
The <a href="http://caml.inria.fr/pub/docs/manual-ocaml/lexyacc.html">OCaml
lexical analyzer generator</a> is called <tt>ocamllex</tt> and it comes
with any OCaml distribution. 

<li> 
Haskell uses <A href="http://www.haskell.org/alex/">the Alex lexical
analyzer generator</a>.  It comes with the Haskell Platform.

<li> 
A <a href="https://github.com/mancmelou/lexeme">Ruby lexical
analyzer generator</a> called <tt>lexeme</tt> is available, but you must
download it yourself. 

<li> 
A <a href="http://zaach.github.io/jison/">JavaScript lexical analyzer
generator</a> called <tt>jison</tt> is available. You must download it
yourself. 
  <ul>
  <li> <a href="http://jscc.phorward-software.com/">Alternate tool:
  JS/CC.</a> 
  </ul> 

<li> 
A <a href="http://www.dabeaz.com/ply/">Python lexical analyzer
generator</a> called <tt>ply</tt> is available, but you must download it
yourself. 

</ul> 

<p>
All of these lexical analyzer generators are derived from <tt>lex</tt> (or
<tt>flex</tt>), the 
<a href="http://en.wikipedia.org/wiki/Lex_programming_tool">original
lexical analyzer generator for C</a>. Thus you may find it handy to 
refer to <a href="http://dinosaur.compilertools.net/lex/index.html">the
Lex paper</a> or <a
href="http://dinosaur.compilertools.net/flex/index.html">the
Flex manual</a>. When you're reading, mentally translate the C code
references into the language of your choice. 
</p> 
<p> 
My personal opinion is that the OCaml and Python tools are a bit more
mature (i.e., easier to use) than the Ruby and JavaScript tools for this
particular project, but the difference is slight. 
</p> 

<h1>Commentary</h1> 

<p>
You can do basic testing with something like the following: 
</p> 
<div class="panel panel-primary"><div class="panel-body">
$ cool --out reference --lex file.cl   </br> 
$ my-lexer file.cl  </br> 
$ diff -b -B -E -w file.cl-lex reference.cl-lex  </br> 
</div></div> 
<p>
For example, if you used OCaml:
</p> 
<div class="panel panel-primary"><div class="panel-body">
$ cool --out reference --lex file.cl  <br> 
$ ocamllex my-lexer.mll <br> 
$ ocaml my-lexer.ml file.cl  <br> 
$ diff file.cl-lex reference.cl-lex  <br> 
</div></div> 
<p>
You may find the reference compiler's 
<tt>--unlex</tt> option useful for
debugging your <tt>.cl-lex</tt> files. 
</p> 
<p>
Need more testcases? Any Cool file you have (including the one you wrote
for PA1) works fine. The contents of <tt>cool-examples.zip</tt> should
be a good start. There's also one among the PA1 hints. You'll want to make
more complicated test cases &mdash; in particular, you'll want to make
<i>negative</i> testcases (e.g., testcases with malformed string
constants). 
</p> 

<h1>Video Guides</h1> 

<p>
A number of Video Guides are provided to help you get started on this
assignment on your own. The Video Guides are walkthroughs in which the
instructor manually completes and narrates, in real time, the
first part of this assignment &mdash; including a submission to an
older-but-similar grading server. They include coding, testing and debugging elements.
</p> 
<p>
If you are still stuck, you can post on the forum
or approach the professor. The use of online
instructional content outside of class weakly approximates a 
<a href="https://en.wikipedia.org/wiki/Flipped_classroom">flipped classroom
model</a>. Click on a video guide to begin, at which point you can watch
it fullscreen or via Youtube if desired.
</p> 
<p>
<div class="row">
  <div class="col-xs-6 col-md-4">
    <div class="embed-responsive embed-responsive-16by9"><iframe 
    src="https://www.youtube.com/embed/pJxgoeTT2QA"
    frameborder="0" allowfullscreen></iframe></div> 
    <center>Python + PLY</center>
  </div> 
  <div class="col-xs-6 col-md-4">
    <div class="embed-responsive embed-responsive-16by9"><iframe 
    src="https://www.youtube.com/embed/GpPIzjJSWls"
    frameborder="0" allowfullscreen></iframe></div> 
    <center>OCaml + ocamllex</center>
  </div> 
</div> 
</p> 

<p> 
<div class="row">
  <div class="col-xs-6 col-md-4">
    <center>
    <img src="youtube-faster.jpg">
    <p>
    Reminder: You can watch YouTube videos
    at 1.5x speed with full audio.
    </p> 
    </center>
  </div> 
</div> 
</p> 


<h1>What To Turn In For PA2</h1> 

<p>
You must turn in these files: 
</p> 
<ol>
  <li> <tt>readme.txt</tt> &mdash; your README file 
  <li> <tt>good.cl</tt> &mdash; a novel positive testcase
  <li> <tt>bad.cl</tt> &mdash; a novel negative testcase
  <li> <tt><i>source_files</i></tt> &mdash; including
    <ul>
      <li> <i>main.rb</i> or
      <li> <i>main.py</i> or
      <li> <i>main.hs</i> (and <i>some_file.x</i>, if applicable) or
      <li> <i>main.js</i> (and <i>some_file.jison</i>, if applicable) or
      <li> <i>main.ml</i> and <i>some_file.mll</i> 
    </ul>
    <div class="panel panel-warning">
    <div class="panel-body">
    If your regular expressions and lexer definition are in some other
    file (e.g., <tt>lexer.mll</tt>, <tt>lexer.jison</tt>, etc.), be sure to
    include them as well!
    </div></div> 
</ol> 
<p>

<h1>Working In Pairs</h1> 

<p> 
You may complete this project in a team of two. Teamwork imposes burdens
of communication and coordination, but has the benefits of more thoughtful
designs and cleaner programs. Team programming is also the norm in the
professional world.
</p> <p> 
Students on a team are expected to participate equally in the effort and to
be thoroughly familiar with all aspects of the joint work. Both members
bear full responsibility for the completion of assignments. Partners turn
in one solution for each programming assignment; each member receives the
same grade for the assignment. If a partnership is not going well, the
teaching assistants will help to negotiate new partnerships. Teams may not
be dissolved in the middle of an assignment.
</p> <p> 
If you are working in a team, use the standard teaming interface on the
autograder. 
</p> 

<h1>Grading Rubric</h1> 

<p> 
PA2 Grading (out of 50 points):
</p> 
    <ul>
    <li> 38 points &mdash; for autograder tests 
      <ul> 
      <li> The scoring is directly proportional to the number of autograder
      tests you pass.
      </ul> 
    <li> 4 points &mdash; for a clear description in your README
      <ul> 
      <li> 4 &mdash; thorough discussion of design decisions (including handling
      of strings and comments) and choice of test cases; a few paragraphs
      of coherent English sentences should be fine
      <li> 2 &mdash; vague or hard to understand; omits important details
      <li> 0 &mdash; little to no effort 
      </ul>
    <li> 4 point &mdash; for valid and novel <tt>good.cl</tt> and <tt>bad.cl</tt> files
      <ul> 
      <li> 4 &mdash; wide range of test cases added, stressing most Cool features
      and an error condition, novel files
      <li> 2 &mdash; added some tests, but the scope not sufficiently broad
      <li> 0 &mdash; little to no effort, or submitted an RTF/DOC/PDF file
      instead of plain TXT, or submitted part of course files as test cases
      </ul>
    <li> 4 point &mdash; for code cleanliness
      <ul> 
      <li> 4 &mdash; code is mostly clean and well-commented
      <li> 2 &mdash; code is sloppy and/or poorly commented in places
      <li> 0 &mdash; little to no effort to organize and document code
      </ul>
    </ul> 
  </ul> 

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>

</body>
</html>
